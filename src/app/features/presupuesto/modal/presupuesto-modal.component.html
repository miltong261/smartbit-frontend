<div class="pt-4 px-4">

  <h2 class="text-2xl font-semibold text-gray-800 mb-4">
    {{ esEdicion ? 'Editar monto presupuestado' : 'Crear presupuesto' }}
  </h2>

  <mat-dialog-content class="pb-4">

    <form [formGroup]="form" class="space-y-5">

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Monto <span class="text-red-600">*</span>
        </label>
        <input
          type="number"
          formControlName="montoPresupuestado"
          min="0.01"
          step="0.01"
          class="w-full px-4 py-2.5 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
          [ngClass]="{
            'border-red-500 ring-red-300 ring-1': form.controls['montoPresupuestado'].invalid && form.controls['montoPresupuestado'].touched
          }"
        >
      </div>

      <div *ngIf="!esEdicion">
        <label class="block text-sm font-medium text-gray-700 mb-1">
          Tipo de gasto <span class="text-red-600">*</span>
        </label>
        <select
          formControlName="tipoGastoId"
          class="w-full px-4 py-2.5 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
          [ngClass]="{
            'border-red-500 ring-red-300 ring-1': form.controls['tipoGastoId'].invalid && form.controls['tipoGastoId'].touched
          }"
        >
          <option [ngValue]="null" disabled selected>Seleccione un tipo de gasto</option>
          <option *ngFor="let tipoGasto of tipoGastos" [ngValue]="tipoGasto.id">
            {{ tipoGasto.nombre }}
          </option>
        </select>
      </div>

      <div class="flex gap-4" *ngIf="!esEdicion">
        <div class="flex-1">
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Mes <span class="text-red-600">*</span>
          </label>
          <select
            formControlName="mes"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
            [ngClass]="{
              'border-red-500 ring-red-300 ring-1': form.controls['mes'].invalid && form.controls['mes'].touched
            }"
          >
            <option [ngValue]="null" disabled selected>Seleccione...</option>
            <option *ngFor="let m of meses" [ngValue]="m.id">{{ m.nombre }}</option>
          </select>
        </div>

        <div class="flex-1">
          <label class="block text-sm font-medium text-gray-700 mb-1">
            AÃ±o <span class="text-red-600">*</span>
          </label>
          <select
            formControlName="anio"
            class="w-full px-4 py-2.5 border border-gray-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
            [ngClass]="{
              'border-red-500 ring-red-300 ring-1': form.controls['anio'].invalid && form.controls['anio'].touched
            }"
          >
            <option [ngValue]="null" disabled selected>Seleccione...</option>
            <option *ngFor="let a of anios" [ngValue]="a">{{ a }}</option>
          </select>
        </div>
      </div>

    </form>

  </mat-dialog-content>

  <mat-dialog-actions align="end" class="pt-4">
    <button
      class="px-4 py-2.5 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition font-medium shadow-sm cursor-pointer"
      (click)="dialogRef.close(false)"
    >
      Cancelar
    </button>

    <button
      class="ml-3 px-5 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition font-medium shadow shadow-blue-200 disabled:opacity-50 cursor-pointer"
      [disabled]="loading"
      (click)="create()"
    >
      Guardar
    </button>
  </mat-dialog-actions>

</div>
